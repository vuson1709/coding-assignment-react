"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rollupInitSchematic = exports.rollupInitGenerator = void 0;
const tslib_1 = require("tslib");
const devkit_1 = require("@nrwl/devkit");
const versions_1 = require("@nrwl/js/src/utils/versions");
const versions_2 = require("../../utils/versions");
const add_babel_inputs_1 = require("@nrwl/js/src/utils/add-babel-inputs");
function rollupInitGenerator(tree, schema) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        let task;
        if (schema.compiler === 'babel') {
            (0, add_babel_inputs_1.addBabelInputs)(tree);
        }
        if (schema.compiler === 'swc') {
            task = (0, devkit_1.addDependenciesToPackageJson)(tree, {}, {
                '@nrwl/rollup': versions_2.nxVersion,
                '@swc/helpers': versions_1.swcHelpersVersion,
                '@swc/core': versions_1.swcCoreVersion,
                'swc-loader': versions_2.swcLoaderVersion,
            });
        }
        else {
            task = (0, devkit_1.addDependenciesToPackageJson)(tree, {}, { tslib: versions_2.tsLibVersion });
        }
        if (!schema.skipFormat) {
            yield (0, devkit_1.formatFiles)(tree);
        }
        return task;
    });
}
exports.rollupInitGenerator = rollupInitGenerator;
exports.default = rollupInitGenerator;
exports.rollupInitSchematic = (0, devkit_1.convertNxGenerator)(rollupInitGenerator);
//# sourceMappingURL=init.js.map